<html>

<head>
  <title>Express</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body>
  <h1>Express</h1>
  <button id="cringe">Cringe rn</button>
  <button id="cringe2">Cringe right password</button>
  <button id="cringe3">Cringe wrong password</button>
  <button id="cringe4">you get me</button>
  <div id="res"></div>
  <script>
    document.getElementById("cringe").onclick = async () => {
      let res = await fetch("/users/register", {
        method: "POST", headers: {
          "Content-Type": "application/json"
        }, body: JSON.stringify({ username: "marek", password: "heslo", email: "me@notmarek.com" })
      });
      document.getElementById("res").innerText = await res.text();
    }

    document.getElementById("cringe2").onclick = async () => {
      let res = await fetch("/users/login", {
        method: "POST", headers: {
          "Content-Type": "application/json"
        }, body: JSON.stringify({ username: "marek", password: "heslo", email: "me@notmarek.com" })
      });
      let data = await res.json();
      localStorage.setItem("token", data.token);
      document.getElementById("res").innerText = JSON.stringify(data);
    }
    document.getElementById("cringe3").onclick = async () => {
      let res = await fetch("/users/login", {
        method: "POST", headers: {
          "Content-Type": "application/json"
        }, body: JSON.stringify({ username: "marek", password: "hesfdsfdslo", email: "me@notmarek.com" })
      });
      document.getElementById("res").innerText = await res.text();
    }
    document.getElementById("cringe4").onclick = async () => {
      let res = await fetch("/users/me", {
        method: "get", headers: {
          authorization: localStorage.getItem("token")
        }
      });
      document.getElementById("res").innerText = await res.text();
    }
  </script>
</body>

</html>